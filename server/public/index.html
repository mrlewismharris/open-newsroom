<!DOCTYPE html>
<html>
   <head> 
      <meta charset="UTF-8">
      <title>Open Newsroom OBS Display</title>
      <script src = "io/socket.io.js"></script>
      <style>
        body {margin:0;overflow:hidden}
        #mainContainer {width:1920px;height:1080px;}
        .onscreenElement {position:absolute;}
        .noConnect {font-size:32px;font-weight:bold;background-color:#000;color:#fff;margin:0;}
      </style>
   </head>
   <body>
    <div id="mainContainer"><p class="noConnect">No Connection</p></div>
    <script>
      const socket = io();
      //on connect msg clear "no connection" from mainContainer
      
      socket.emit("clientTestConnection", (data) => {
        socket.on("obsConnect", () => {
          document.getElementById("mainContainer").innerHTML = ""
        })
      })

      socket.on("broadcastSceneCollection", (data) => {
        let screen = document.getElementById("mainContainer");
        //screen.innerHTML = "";
        console.log(data);
        //screen.append(data);
      })

      socket.on("obsDisplay", (data) => {
        let main = document.getElementById("mainContainer")
        main.innerHTML = ""
        if (data.length == 0) return
        data.forEach(el => {
          let element = document.createElement(el.type)
          element.className = "onscreenElement"
          element.style = el.params
          element.innerText = el.content
          console.log(element)
          main.appendChild(element)
        })
      })

    </script>
   </body>
</html>